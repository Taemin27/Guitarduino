// 'Effects', 160x80px
const unsigned char effectsHome [] PROGMEM = {
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xf8, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x1f, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x7f, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xff, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xff, 0xfc, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x1f, 0xff, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x7f, 0xff, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xff, 0xf8, 0x7c, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xff, 0xc0, 0x7c, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 
	0xff, 0x00, 0x7c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x3f, 0xfc, 0x00, 0x7c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0xf0, 0x00, 0x7c, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0xc0, 0x00, 0x7c, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e, 
	0x00, 0x00, 0x7c, 0x3f, 0xff, 0x81, 0xf1, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x7c, 0x3f, 0xff, 0x83, 0xf3, 0xf0, 0x00, 0x00, 0x00, 0x06, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x7c, 0x3f, 0xff, 0x87, 0x87, 0x80, 
	0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x7c, 0x38, 
	0x00, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e, 
	0x00, 0x00, 0x7c, 0x38, 0x00, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x7c, 0x38, 0x00, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x0e, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x7c, 0x38, 0x00, 0x1f, 0xdf, 0xc0, 
	0xfc, 0x00, 0xfc, 0x3f, 0x83, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x7c, 0x38, 
	0x00, 0x1f, 0xdf, 0xc1, 0xff, 0x03, 0xfe, 0x3f, 0x8f, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e, 
	0x00, 0x00, 0x7c, 0x3f, 0xff, 0x07, 0x07, 0x03, 0x87, 0x87, 0x87, 0x0e, 0x1e, 0x1e, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x7c, 0x3f, 0xff, 0x07, 0x07, 0x07, 0x03, 0x87, 0x07, 0x8e, 
	0x1c, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x7c, 0x3f, 0xff, 0x07, 0x07, 0x0e, 
	0x01, 0xce, 0x03, 0x8e, 0x1c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x7c, 0x38, 
	0x00, 0x07, 0x07, 0x0e, 0x01, 0xce, 0x00, 0x0e, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e, 
	0x00, 0x00, 0x7c, 0x38, 0x00, 0x07, 0x07, 0x0f, 0xff, 0xce, 0x00, 0x0e, 0x0f, 0xe0, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x7c, 0x38, 0x00, 0x07, 0x07, 0x0f, 0xff, 0xce, 0x00, 0x0e, 
	0x03, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x7c, 0x38, 0x00, 0x07, 0x07, 0x0e, 
	0x00, 0x0e, 0x00, 0x0e, 0x00, 0x7e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x7c, 0x38, 
	0x00, 0x07, 0x07, 0x0e, 0x00, 0x0e, 0x03, 0x8e, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e, 
	0x00, 0x00, 0x7c, 0x38, 0x00, 0x07, 0x07, 0x0f, 0x01, 0xce, 0x03, 0x8e, 0x1c, 0x07, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x7c, 0x38, 0x00, 0x07, 0x07, 0x07, 0x03, 0x87, 0x07, 0x0e, 
	0x1e, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x7c, 0x3f, 0xff, 0x87, 0x07, 0x07, 
	0x87, 0x87, 0x8f, 0x0e, 0x0f, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x7c, 0x3f, 
	0xff, 0x87, 0x07, 0x03, 0xff, 0x03, 0xfe, 0x0f, 0x87, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e, 
	0x00, 0x07, 0xfc, 0x3f, 0xff, 0x87, 0x07, 0x00, 0xfc, 0x00, 0xf8, 0x07, 0x83, 0xf8, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x3e, 0x00, 0x1f, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x7f, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xfe, 0x00, 0xff, 0xfc, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xfe, 
	0x00, 0xff, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x3f, 0xfe, 0x01, 0xff, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7f, 0xfe, 0x01, 0xff, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7f, 0xfe, 0x01, 0xff, 0xf8, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xfe, 
	0x00, 0xff, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0xff, 0xfc, 0x00, 0xff, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xfc, 0x00, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7f, 0xf8, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7f, 0xe0, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x3f, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
	0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

/*
Dynamic
  Compressor
  EQ
  Boost

Pitch
  Pitch Shifter
  Octaver

Drive
  Overdrive
  Distortion
  Fuzz

Modulation
  Chorus
  Phaser
  Flanger

Time-Based
  Delay
  Reverb
*/




int ef_presetNum = 1;
int ef_cursorLoc = 0;
int ef_maxCursorLoc = 0;
bool ef_valueSelected = false;

// Time-Based effects variables
bool ef_reverb_on = false;
int ef_reverb_roomSize = 0;
int ef_reverb_damping = 0;
int ef_reverb_wetDry = 0;

enum Ef_pages {
  home,
  typeMenu,
    timeBased,
      reverb
};

Ef_pages ef_currentPage = home;


void effects_setup() {
  display.fillScreen(BLACK);
  display.drawBitmap(0, 0, effectsHome, 160, 80, WHITE);
  drawArrows();
  display.display();
}

void effects_loop() {
  // Button pressed
  if (digitalRead(1) == LOW) {
    switch(ef_currentPage) {
      case home:
        pageSelected = true;
        ef_currentPage = typeMenu;
        ef_drawTypeMenu();
        display.display();
        break;

      case typeMenu:
        switch(ef_cursorLoc) {
          case 0:
            pageSelected = false;
            ef_currentPage = home;
            effects_setup();
            break;
          case 6:
            ef_currentPage = timeBased;
            ef_cursorLoc = 0;
            ef_drawTimeBased();
            display.display();
            break;
        }
        break;

      // Menus under time-based
      case timeBased:
        switch(ef_cursorLoc) {
          case 0:
            ef_currentPage = typeMenu;
            ef_cursorLoc = 6;
            ef_drawTypeMenu();
            display.display();
            break;
          case 2:
            ef_currentPage = reverb;
            ef_cursorLoc = 0;
            ef_drawReverb();
            display.display();
            break;
        }
        break;

        case reverb:
          switch(ef_cursorLoc) {
            case 0:
              ef_currentPage = timeBased;
              ef_cursorLoc = 2;
              ef_drawTimeBased();
              display.display();
              break;
            case 1:
              ef_reverb_on = !ef_reverb_on;
              ef_drawReverb();
              display.display();
              break;
            default:
              ef_valueSelected = !ef_valueSelected;
              ef_drawReverb();
              display.display();
              break;
          }
          break;
    }
    delay(300);
  }

  // Encoder turned
  if (pageSelected) {
    int encoder = readEncoder();

    if(encoder == 0) {

    }
    else {
      // Right
      if (encoder == 1) {
        // Changing effect values
        if (ef_valueSelected) {
          switch(ef_currentPage) {
            case reverb:
              if(ef_cursorLoc == 2) {
                if  (ef_reverb_roomSize < 10) {
                  ef_reverb_roomSize ++;
                }
              }
              else if(ef_cursorLoc == 3) {
                if  (ef_reverb_damping < 10) {
                  ef_reverb_damping ++;
                }
              }
              else if(ef_cursorLoc == 4) {
                if  (ef_reverb_wetDry < 10) {
                  ef_reverb_wetDry ++;
                }
              }
              break;

            default: break;
          }
        }

        // Browsing menu
        else {
          if(ef_cursorLoc < ef_maxCursorLoc) {
            ef_cursorLoc ++;
          }
        }
      }

      // Left
      else if (encoder == -1) {
        // Changing effect values
        if (ef_valueSelected) {
          switch(ef_currentPage) {
            case reverb:
              if(ef_cursorLoc == 2) {
                if  (ef_reverb_roomSize > 0) {
                  ef_reverb_roomSize --;
                }
              }
              else if(ef_cursorLoc == 3) {
                if  (ef_reverb_damping > 0) {
                  ef_reverb_damping --;
                }
              }
              else if(ef_cursorLoc == 4) {
                if  (ef_reverb_wetDry > 0) {
                  ef_reverb_wetDry --;
                }
              }
              break;

            default: break;
          }
        }

        // Browsing menu
        else {
          if(ef_cursorLoc > 0) {
            ef_cursorLoc --;
          }
        }
      }
      
      // Draw menus with new cursor value
      switch(ef_currentPage) {
        case typeMenu:
          ef_drawTypeMenu();
          display.display();
          break;

          case timeBased:
            ef_drawTimeBased();
            display.display();
            break;

            case reverb:
              ef_drawReverb();
              display.display();
      }
    }
  }
}

void ef_drawTypeMenu() {
  ef_maxCursorLoc = 6;

  display.fillScreen(BLACK);
  display.setTextSize(2);
  display.setTextColor(WHITE, BLACK);
  display.setCursor(0, 0);
  display.println("<<< Preset: " + String(ef_presetNum));
  if(ef_cursorLoc < 6) {
    display.println("Dynamic");
    display.println("Pitch");
    display.println("Drive");
    display.println("Modulation");
  }
  else {
    display.println("Time-Based");
  }

  display.setTextColor(BLUE);
  switch(ef_cursorLoc) {
    case 0:
      display.setCursor(0, 0);
      display.print("<<<");
      break;
    case 1:
      display.setCursor(48, 0);
      display.print("Preset: " + String(ef_presetNum));
      break;
    case 2:
      display.setCursor(0, 16);
      display.print("Dynamic");
      break;
    case 3:
      display.setCursor(0, 32);
      display.print("Pitch");
      break;
    case 4:
      display.setCursor(0, 48);
      display.print("Drive");
      break;
    case 5:
      display.setCursor(0, 64);
      display.print("Modulation");
      break;
    case 6:
      display.setCursor(0, 16);
      display.print("Time-Based");
      break;
  }
}

void ef_drawTimeBased() {
  ef_maxCursorLoc = 2;
  
  display.fillScreen(BLACK);
  display.setTextSize(2);
  display.setTextColor(WHITE, BLACK);
  display.setCursor(0, 0);
  display.println("<<<Time-Based");
  display.println("Delay");
  display.println("Reverb");

  display.setTextColor(BLUE);
  switch(ef_cursorLoc) {
    case 0:
      display.setCursor(0, 0);
      display.print("<<<");
      break;
    case 1:
      display.setCursor(0, 16);
      display.print("Delay");
      break;
    case 2:
      display.setCursor(0, 32);
      display.print("Reverb");
      break;
  }
}

void ef_drawReverb() {
  ef_maxCursorLoc = 4;

  display.fillScreen(BLACK);
  display.setTextSize(2);
  display.setTextColor(WHITE);
  display.setCursor(0, 0);
  display.print("<<<  ");
  // Effect on/off
  if(ef_reverb_on) {
    display.setTextColor(GREEN);
    display.println("Reverb");
    display.setTextColor(WHITE);

    // Enable reverb and apply settings
    reverbOnOffMixer.gain(0, 0);
    reverbOnOffMixer.gain(1, 1);
    freeverb1.roomsize(float(ef_reverb_roomSize) / 10);
    freeverb1.damping(float(ef_reverb_damping) / 10);
    reverbMixer.gain(0, float(10 - ef_reverb_wetDry) / 10);
    reverbMixer.gain(1, float(ef_reverb_wetDry) / 10);
  }
  else {
    display.setTextColor(GRAY);
    display.println("Reverb");
    display.setTextColor(WHITE);

    // Bypass reverb
    reverbOnOffMixer.gain(0, 1);
    reverbOnOffMixer.gain(1, 0);
  }
  // Parameters
  display.println("Room Size  " + String(ef_reverb_roomSize));
  display.println("Damping    " + String(ef_reverb_damping));
  display.println("Wet/Dry    " + String(ef_reverb_wetDry));

  // Cursor on parameter value
  display.setTextColor(BLUE);
  if (ef_valueSelected) {
    switch(ef_cursorLoc) {
      case 2:
        display.setCursor(132, 16);
        display.print(ef_reverb_roomSize);
        break;
      case 3:
        display.setCursor(132, 32);
        display.print(ef_reverb_damping);
        break;
      case 4:
        display.setCursor(132, 48);
        display.print(ef_reverb_wetDry);
        break;
    }
  }
  // Cursor on parameter name
  else {
    switch(ef_cursorLoc) {
      case 0:
        display.setCursor(0, 0);
        display.print("<<<");
        break;
      case 1:
        if (ef_reverb_on) {
          display.setTextColor(GREEN, WHITE);
        }
        else {
          display.setTextColor(GRAY, WHITE);
        }
        display.setCursor(60, 0);
        display.print("Reverb");
        break;
      case 2:
        display.setCursor(0, 16);
        display.print("Room Size");
        break;
      case 3:
        display.setCursor(0, 32);
        display.print("Damping");
        break;
      case 4:
        display.setCursor(0, 48);
        display.print("Wet/Dry");
        break;
    }
  }
}
